"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/auth/[...nextauth]";
exports.ids = ["pages/api/auth/[...nextauth]"];
exports.modules = {

/***/ "bcrypt":
/*!*************************!*\
  !*** external "bcrypt" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("bcrypt");

/***/ }),

/***/ "better-sqlite3":
/*!*********************************!*\
  !*** external "better-sqlite3" ***!
  \*********************************/
/***/ ((module) => {

module.exports = require("better-sqlite3");

/***/ }),

/***/ "next-auth":
/*!****************************!*\
  !*** external "next-auth" ***!
  \****************************/
/***/ ((module) => {

module.exports = require("next-auth");

/***/ }),

/***/ "next-auth/providers/credentials":
/*!**************************************************!*\
  !*** external "next-auth/providers/credentials" ***!
  \**************************************************/
/***/ ((module) => {

module.exports = require("next-auth/providers/credentials");

/***/ }),

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ }),

/***/ "(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fauth%2F%5B...nextauth%5D&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cauth%5C%5B...nextauth%5D.js&middlewareConfigBase64=e30%3D!":
/*!******************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fauth%2F%5B...nextauth%5D&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cauth%5C%5B...nextauth%5D.js&middlewareConfigBase64=e30%3D! ***!
  \******************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/pages-api/module.compiled */ \"(api)/./node_modules/next/dist/server/future/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(api)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api)/./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _pages_api_auth_nextauth_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./pages\\api\\auth\\[...nextauth].js */ \"(api)/./pages/api/auth/[...nextauth].js\");\n\n\n\n// Import the userland code.\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_auth_nextauth_js__WEBPACK_IMPORTED_MODULE_3__, \"default\"));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_auth_nextauth_js__WEBPACK_IMPORTED_MODULE_3__, \"config\");\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/auth/[...nextauth]\",\n        pathname: \"/api/auth/[...nextauth]\",\n        // The following aren't used in production.\n        bundlePath: \"\",\n        filename: \"\"\n    },\n    userland: _pages_api_auth_nextauth_js__WEBPACK_IMPORTED_MODULE_3__\n});\n\n//# sourceMappingURL=pages-api.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LXJvdXRlLWxvYWRlci9pbmRleC5qcz9raW5kPVBBR0VTX0FQSSZwYWdlPSUyRmFwaSUyRmF1dGglMkYlNUIuLi5uZXh0YXV0aCU1RCZwcmVmZXJyZWRSZWdpb249JmFic29sdXRlUGFnZVBhdGg9LiUyRnBhZ2VzJTVDYXBpJTVDYXV0aCU1QyU1Qi4uLm5leHRhdXRoJTVELmpzJm1pZGRsZXdhcmVDb25maWdCYXNlNjQ9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQUFzRztBQUN2QztBQUNMO0FBQzFEO0FBQ2lFO0FBQ2pFO0FBQ0EsaUVBQWUsd0VBQUssQ0FBQyx3REFBUSxZQUFZLEVBQUM7QUFDMUM7QUFDTyxlQUFlLHdFQUFLLENBQUMsd0RBQVE7QUFDcEM7QUFDTyx3QkFBd0IsZ0hBQW1CO0FBQ2xEO0FBQ0EsY0FBYyx5RUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLFlBQVk7QUFDWixDQUFDOztBQUVEIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vY29kZXBlbi8/YTBkNyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBQYWdlc0FQSVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLW1vZHVsZXMvcGFnZXMtYXBpL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IGhvaXN0IH0gZnJvbSBcIm5leHQvZGlzdC9idWlsZC90ZW1wbGF0ZXMvaGVscGVyc1wiO1xuLy8gSW1wb3J0IHRoZSB1c2VybGFuZCBjb2RlLlxuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIi4vcGFnZXNcXFxcYXBpXFxcXGF1dGhcXFxcWy4uLm5leHRhdXRoXS5qc1wiO1xuLy8gUmUtZXhwb3J0IHRoZSBoYW5kbGVyIChzaG91bGQgYmUgdGhlIGRlZmF1bHQgZXhwb3J0KS5cbmV4cG9ydCBkZWZhdWx0IGhvaXN0KHVzZXJsYW5kLCBcImRlZmF1bHRcIik7XG4vLyBSZS1leHBvcnQgY29uZmlnLlxuZXhwb3J0IGNvbnN0IGNvbmZpZyA9IGhvaXN0KHVzZXJsYW5kLCBcImNvbmZpZ1wiKTtcbi8vIENyZWF0ZSBhbmQgZXhwb3J0IHRoZSByb3V0ZSBtb2R1bGUgdGhhdCB3aWxsIGJlIGNvbnN1bWVkLlxuZXhwb3J0IGNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IFBhZ2VzQVBJUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLlBBR0VTX0FQSSxcbiAgICAgICAgcGFnZTogXCIvYXBpL2F1dGgvWy4uLm5leHRhdXRoXVwiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL2F1dGgvWy4uLm5leHRhdXRoXVwiLFxuICAgICAgICAvLyBUaGUgZm9sbG93aW5nIGFyZW4ndCB1c2VkIGluIHByb2R1Y3Rpb24uXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiXCIsXG4gICAgICAgIGZpbGVuYW1lOiBcIlwiXG4gICAgfSxcbiAgICB1c2VybGFuZFxufSk7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXBhZ2VzLWFwaS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fauth%2F%5B...nextauth%5D&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cauth%5C%5B...nextauth%5D.js&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api)/./lib/db.js":
/*!*******************!*\
  !*** ./lib/db.js ***!
  \*******************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   deletePenById: () => (/* binding */ deletePenById),\n/* harmony export */   findPenById: () => (/* binding */ findPenById),\n/* harmony export */   getUserByEmail: () => (/* binding */ getUserByEmail),\n/* harmony export */   registerNewUser: () => (/* binding */ registerNewUser),\n/* harmony export */   savePen: () => (/* binding */ savePen),\n/* harmony export */   updateSummary: () => (/* binding */ updateSummary)\n/* harmony export */ });\n/* harmony import */ var better_sqlite3__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! better-sqlite3 */ \"better-sqlite3\");\n/* harmony import */ var better_sqlite3__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(better_sqlite3__WEBPACK_IMPORTED_MODULE_0__);\n\nconst db = better_sqlite3__WEBPACK_IMPORTED_MODULE_0___default()(\"productiondatabase.db\");\nasync function registerNewUser(data) {\n    const { firstname, lastname, password, passwordagain, email } = data;\n    try {\n        var result = await db.prepare(`\r\n    INSERT INTO authors (firstname, lastname, password , email , role) VALUES ('${firstname}' , '${lastname}' , '${password}' ,'${email}' ,'author');\r\n    `).run();\n    } catch (err) {\n        console.log(err);\n    } finally{\n        return result;\n    }\n}\nasync function getUserByEmail(email) {\n    // check user exist on db\n    const result = await db.prepare(`\r\n    SELECT * FROM authors WHERE email = '${email}';\r\n    `).get();\n    return result;\n}\nasync function savePen({ html, css, js, title, authorid }) {\n    console.log(html, css, js, title, authorid);\n    const summary = \"\"; // initial value\n    const likes = 0; // initial value\n    try {\n        var result = db.prepare(`\r\n    INSERT INTO pens (htmlcode, csscode,  jscode , title , likes , summary , authorid)\r\n    VALUES ('${html}' , '${css}' , '${js}', '${title}','${likes}' , '${summary}' , '${authorid}');\r\n    `).run();\n        return result;\n    } catch (err) {\n        console.log(err);\n        return result;\n    }\n}\nasync function findPenById(id) {\n    const result = await db.prepare(`\r\n  SELECT * FROM pens WHERE id = '${id}';\r\n  `).get();\n    return result;\n}\nasync function deletePenById(id) {\n    const result = await db.prepare(`\r\n    DELETE FROM pens\r\n    WHERE id = ${id};\r\n`).run();\n    return result;\n}\nasync function updateSummary(id, summary) {\n    const result = await db.prepare(`\r\n    UPDATE pens\r\n    SET summary = '${summary}'\r\n    WHERE id = ${id};\r\n`).run();\n    return result;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9saWIvZGIuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFBaUM7QUFDakMsTUFBTUMsS0FBS0QscURBQUdBLENBQUNFLHVCQUFrQjtBQUMxQixlQUFlRyxnQkFBZ0JDLElBQUk7SUFDeEMsTUFBTSxFQUFFQyxTQUFTLEVBQUVDLFFBQVEsRUFBRUMsUUFBUSxFQUFFQyxhQUFhLEVBQUVDLEtBQUssRUFBRSxHQUFHTDtJQUVoRSxJQUFJO1FBQ0YsSUFBSU0sU0FBUyxNQUFNWCxHQUNoQlksT0FBTyxDQUNOLENBQUM7Z0ZBQ3VFLEVBQUVOLFVBQVUsS0FBSyxFQUFFQyxTQUFTLEtBQUssRUFBRUMsU0FBUyxJQUFJLEVBQUVFLE1BQU07SUFDcEksQ0FBQyxFQUVFRyxHQUFHO0lBQ1IsRUFBRSxPQUFPQyxLQUFLO1FBQ1pDLFFBQVFDLEdBQUcsQ0FBQ0Y7SUFDZCxTQUFVO1FBQ1IsT0FBT0g7SUFDVDtBQUNGO0FBRU8sZUFBZU0sZUFBZVAsS0FBSztJQUN4Qyx5QkFBeUI7SUFDekIsTUFBTUMsU0FBUyxNQUFNWCxHQUNsQlksT0FBTyxDQUNOLENBQUM7eUNBQ2tDLEVBQUVGLE1BQU07SUFDN0MsQ0FBQyxFQUVBUSxHQUFHO0lBRU4sT0FBT1A7QUFDVDtBQUVPLGVBQWVRLFFBQVEsRUFBRUMsSUFBSSxFQUFFQyxHQUFHLEVBQUVDLEVBQUUsRUFBRUMsS0FBSyxFQUFFQyxRQUFRLEVBQUU7SUFDOURULFFBQVFDLEdBQUcsQ0FBQ0ksTUFBTUMsS0FBS0MsSUFBSUMsT0FBT0M7SUFDbEMsTUFBTUMsVUFBVSxJQUFJLGdCQUFnQjtJQUNwQyxNQUFNQyxRQUFRLEdBQUcsZ0JBQWdCO0lBRWpDLElBQUk7UUFDRixJQUFJZixTQUFTWCxHQUNWWSxPQUFPLENBQ04sQ0FBQzs7YUFFSSxFQUFFUSxLQUFLLEtBQUssRUFBRUMsSUFBSSxLQUFLLEVBQUVDLEdBQUcsSUFBSSxFQUFFQyxNQUFNLEdBQUcsRUFBRUcsTUFBTSxLQUFLLEVBQUVELFFBQVEsS0FBSyxFQUFFRCxTQUFTO0lBQzNGLENBQUMsRUFFRVgsR0FBRztRQUNOLE9BQU9GO0lBQ1QsRUFBRSxPQUFPRyxLQUFLO1FBQ1pDLFFBQVFDLEdBQUcsQ0FBQ0Y7UUFDWixPQUFPSDtJQUNUO0FBQ0Y7QUFFTyxlQUFlZ0IsWUFBWUMsRUFBRTtJQUNsQyxNQUFNakIsU0FBUyxNQUFNWCxHQUNsQlksT0FBTyxDQUNOLENBQUM7aUNBQzBCLEVBQUVnQixHQUFHO0VBQ3BDLENBQUMsRUFFRVYsR0FBRztJQUVOLE9BQU9QO0FBQ1Q7QUFFTyxlQUFla0IsY0FBY0QsRUFBRTtJQUNwQyxNQUFNakIsU0FBUyxNQUFNWCxHQUNsQlksT0FBTyxDQUNOLENBQUM7O2VBRVEsRUFBRWdCLEdBQUc7QUFDcEIsQ0FBQyxFQUVJZixHQUFHO0lBRU4sT0FBT0Y7QUFDVDtBQUNPLGVBQWVtQixjQUFjRixFQUFFLEVBQUVILE9BQU87SUFDN0MsTUFBTWQsU0FBUyxNQUFNWCxHQUNsQlksT0FBTyxDQUNOLENBQUM7O21CQUVZLEVBQUVhLFFBQVE7ZUFDZCxFQUFFRyxHQUFHO0FBQ3BCLENBQUMsRUFFSWYsR0FBRztJQUVOLE9BQU9GO0FBQ1QiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9jb2RlcGVuLy4vbGliL2RiLmpzPzNkYzkiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHNxbCBmcm9tIFwiYmV0dGVyLXNxbGl0ZTNcIjtcclxuY29uc3QgZGIgPSBzcWwocHJvY2Vzcy5lbnYuREJOQU1FKTtcclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHJlZ2lzdGVyTmV3VXNlcihkYXRhKSB7XHJcbiAgY29uc3QgeyBmaXJzdG5hbWUsIGxhc3RuYW1lLCBwYXNzd29yZCwgcGFzc3dvcmRhZ2FpbiwgZW1haWwgfSA9IGRhdGE7XHJcblxyXG4gIHRyeSB7XHJcbiAgICB2YXIgcmVzdWx0ID0gYXdhaXQgZGJcclxuICAgICAgLnByZXBhcmUoXHJcbiAgICAgICAgYFxyXG4gICAgSU5TRVJUIElOVE8gYXV0aG9ycyAoZmlyc3RuYW1lLCBsYXN0bmFtZSwgcGFzc3dvcmQgLCBlbWFpbCAsIHJvbGUpIFZBTFVFUyAoJyR7Zmlyc3RuYW1lfScgLCAnJHtsYXN0bmFtZX0nICwgJyR7cGFzc3dvcmR9JyAsJyR7ZW1haWx9JyAsJ2F1dGhvcicpO1xyXG4gICAgYFxyXG4gICAgICApXHJcbiAgICAgIC5ydW4oKTtcclxuICB9IGNhdGNoIChlcnIpIHtcclxuICAgIGNvbnNvbGUubG9nKGVycik7XHJcbiAgfSBmaW5hbGx5IHtcclxuICAgIHJldHVybiByZXN1bHQ7XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0VXNlckJ5RW1haWwoZW1haWwpIHtcclxuICAvLyBjaGVjayB1c2VyIGV4aXN0IG9uIGRiXHJcbiAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZGJcclxuICAgIC5wcmVwYXJlKFxyXG4gICAgICBgXHJcbiAgICBTRUxFQ1QgKiBGUk9NIGF1dGhvcnMgV0hFUkUgZW1haWwgPSAnJHtlbWFpbH0nO1xyXG4gICAgYFxyXG4gICAgKVxyXG4gICAgLmdldCgpO1xyXG5cclxuICByZXR1cm4gcmVzdWx0O1xyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gc2F2ZVBlbih7IGh0bWwsIGNzcywganMsIHRpdGxlLCBhdXRob3JpZCB9KSB7XHJcbiAgY29uc29sZS5sb2coaHRtbCwgY3NzLCBqcywgdGl0bGUsIGF1dGhvcmlkKTtcclxuICBjb25zdCBzdW1tYXJ5ID0gXCJcIjsgLy8gaW5pdGlhbCB2YWx1ZVxyXG4gIGNvbnN0IGxpa2VzID0gMDsgLy8gaW5pdGlhbCB2YWx1ZVxyXG5cclxuICB0cnkge1xyXG4gICAgdmFyIHJlc3VsdCA9IGRiXHJcbiAgICAgIC5wcmVwYXJlKFxyXG4gICAgICAgIGBcclxuICAgIElOU0VSVCBJTlRPIHBlbnMgKGh0bWxjb2RlLCBjc3Njb2RlLCAganNjb2RlICwgdGl0bGUgLCBsaWtlcyAsIHN1bW1hcnkgLCBhdXRob3JpZClcclxuICAgIFZBTFVFUyAoJyR7aHRtbH0nICwgJyR7Y3NzfScgLCAnJHtqc30nLCAnJHt0aXRsZX0nLCcke2xpa2VzfScgLCAnJHtzdW1tYXJ5fScgLCAnJHthdXRob3JpZH0nKTtcclxuICAgIGBcclxuICAgICAgKVxyXG4gICAgICAucnVuKCk7XHJcbiAgICByZXR1cm4gcmVzdWx0O1xyXG4gIH0gY2F0Y2ggKGVycikge1xyXG4gICAgY29uc29sZS5sb2coZXJyKTtcclxuICAgIHJldHVybiByZXN1bHQ7XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZmluZFBlbkJ5SWQoaWQpIHtcclxuICBjb25zdCByZXN1bHQgPSBhd2FpdCBkYlxyXG4gICAgLnByZXBhcmUoXHJcbiAgICAgIGBcclxuICBTRUxFQ1QgKiBGUk9NIHBlbnMgV0hFUkUgaWQgPSAnJHtpZH0nO1xyXG4gIGBcclxuICAgIClcclxuICAgIC5nZXQoKTtcclxuXHJcbiAgcmV0dXJuIHJlc3VsdDtcclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGRlbGV0ZVBlbkJ5SWQoaWQpIHtcclxuICBjb25zdCByZXN1bHQgPSBhd2FpdCBkYlxyXG4gICAgLnByZXBhcmUoXHJcbiAgICAgIGBcclxuICAgIERFTEVURSBGUk9NIHBlbnNcclxuICAgIFdIRVJFIGlkID0gJHtpZH07XHJcbmBcclxuICAgIClcclxuICAgIC5ydW4oKTtcclxuXHJcbiAgcmV0dXJuIHJlc3VsdDtcclxufVxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gdXBkYXRlU3VtbWFyeShpZCwgc3VtbWFyeSkge1xyXG4gIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGRiXHJcbiAgICAucHJlcGFyZShcclxuICAgICAgYFxyXG4gICAgVVBEQVRFIHBlbnNcclxuICAgIFNFVCBzdW1tYXJ5ID0gJyR7c3VtbWFyeX0nXHJcbiAgICBXSEVSRSBpZCA9ICR7aWR9O1xyXG5gXHJcbiAgICApXHJcbiAgICAucnVuKCk7XHJcblxyXG4gIHJldHVybiByZXN1bHQ7XHJcbn1cclxuIl0sIm5hbWVzIjpbInNxbCIsImRiIiwicHJvY2VzcyIsImVudiIsIkRCTkFNRSIsInJlZ2lzdGVyTmV3VXNlciIsImRhdGEiLCJmaXJzdG5hbWUiLCJsYXN0bmFtZSIsInBhc3N3b3JkIiwicGFzc3dvcmRhZ2FpbiIsImVtYWlsIiwicmVzdWx0IiwicHJlcGFyZSIsInJ1biIsImVyciIsImNvbnNvbGUiLCJsb2ciLCJnZXRVc2VyQnlFbWFpbCIsImdldCIsInNhdmVQZW4iLCJodG1sIiwiY3NzIiwianMiLCJ0aXRsZSIsImF1dGhvcmlkIiwic3VtbWFyeSIsImxpa2VzIiwiZmluZFBlbkJ5SWQiLCJpZCIsImRlbGV0ZVBlbkJ5SWQiLCJ1cGRhdGVTdW1tYXJ5Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./lib/db.js\n");

/***/ }),

/***/ "(api)/./lib/passwordHelper.js":
/*!*******************************!*\
  !*** ./lib/passwordHelper.js ***!
  \*******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   comparePassword: () => (/* binding */ comparePassword),\n/* harmony export */   encrypt: () => (/* binding */ encrypt)\n/* harmony export */ });\nconst bcrypt = __webpack_require__(/*! bcrypt */ \"bcrypt\");\nconst saltRounds = 12;\nasync function encrypt(password) {\n    var result = bcrypt.hash(password, saltRounds);\n    return result;\n}\nasync function comparePassword(password, hash) {\n    var result = await bcrypt.compare(password, hash);\n    return result;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9saWIvcGFzc3dvcmRIZWxwZXIuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBQSxNQUFNQSxTQUFTQyxtQkFBT0EsQ0FBQyxzQkFBUTtBQUMvQixNQUFNQyxhQUFhO0FBQ1osZUFBZUMsUUFBUUMsUUFBUTtJQUNwQyxJQUFJQyxTQUFTTCxPQUFPTSxJQUFJLENBQUNGLFVBQVVGO0lBQ25DLE9BQU9HO0FBQ1Q7QUFFTyxlQUFlRSxnQkFBZ0JILFFBQVEsRUFBRUUsSUFBSTtJQUNsRCxJQUFJRCxTQUFTLE1BQU1MLE9BQU9RLE9BQU8sQ0FBQ0osVUFBVUU7SUFDNUMsT0FBT0Q7QUFDVCIsInNvdXJjZXMiOlsid2VicGFjazovL2NvZGVwZW4vLi9saWIvcGFzc3dvcmRIZWxwZXIuanM/YWUzMyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBiY3J5cHQgPSByZXF1aXJlKFwiYmNyeXB0XCIpO1xyXG5jb25zdCBzYWx0Um91bmRzID0gMTI7XHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBlbmNyeXB0KHBhc3N3b3JkKSB7XHJcbiAgdmFyIHJlc3VsdCA9IGJjcnlwdC5oYXNoKHBhc3N3b3JkLCBzYWx0Um91bmRzKTtcclxuICByZXR1cm4gcmVzdWx0O1xyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY29tcGFyZVBhc3N3b3JkKHBhc3N3b3JkLCBoYXNoKSB7XHJcbiAgdmFyIHJlc3VsdCA9IGF3YWl0IGJjcnlwdC5jb21wYXJlKHBhc3N3b3JkLCBoYXNoKTtcclxuICByZXR1cm4gcmVzdWx0O1xyXG59XHJcbiJdLCJuYW1lcyI6WyJiY3J5cHQiLCJyZXF1aXJlIiwic2FsdFJvdW5kcyIsImVuY3J5cHQiLCJwYXNzd29yZCIsInJlc3VsdCIsImhhc2giLCJjb21wYXJlUGFzc3dvcmQiLCJjb21wYXJlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./lib/passwordHelper.js\n");

/***/ }),

/***/ "(api)/./pages/api/auth/[...nextauth].js":
/*!*****************************************!*\
  !*** ./pages/api/auth/[...nextauth].js ***!
  \*****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   authOptions: () => (/* binding */ authOptions),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _lib_db__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/lib/db */ \"(api)/./lib/db.js\");\n/* harmony import */ var _lib_passwordHelper__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/passwordHelper */ \"(api)/./lib/passwordHelper.js\");\n/* harmony import */ var next_auth__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next-auth */ \"next-auth\");\n/* harmony import */ var next_auth__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_auth__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var next_auth_providers_credentials__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! next-auth/providers/credentials */ \"next-auth/providers/credentials\");\n/* harmony import */ var next_auth_providers_credentials__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(next_auth_providers_credentials__WEBPACK_IMPORTED_MODULE_3__);\n\n\n\n\nconst authOptions = {\n    session: {\n        strategy: \"jwt\",\n        maxAge: 30 * 24 * 60 * 60\n    },\n    secret: \"53ab299c246ebff4f38fa1f20440a7c5d9e05405fe6d3922a78ef15150b29cf1\",\n    providers: [\n        next_auth_providers_credentials__WEBPACK_IMPORTED_MODULE_3___default()({\n            name: \"Credentials\",\n            async authorize (credentials, req) {\n                const { mail, password } = credentials;\n                if (!mail || !password) return null;\n                try {\n                    var user = await (0,_lib_db__WEBPACK_IMPORTED_MODULE_0__.getUserByEmail)(mail);\n                    if (!user) return null;\n                    const flag = await (0,_lib_passwordHelper__WEBPACK_IMPORTED_MODULE_1__.comparePassword)(password, user.password);\n                    if (!flag) return null;\n                } catch (err) {\n                    console.log(err);\n                    return null;\n                }\n                return user;\n            }\n        })\n    ],\n    callbacks: {\n        jwt: async ({ token, user })=>{\n            if (user) {\n                token.uid = user;\n            }\n            return token;\n        },\n        session: async ({ session, token })=>{\n            // here we put session.useData and put inside it whatever you want to be in the session\n            // here try to console.log(token) and see what it will have\n            // sometimes the user get stored in token.uid.userData\n            // sometimes the user data get stored in just token.uid\n            session.userData = {\n                role: token.uid.role,\n                email: token.uid.email,\n                password: token.uid.password,\n                firstname: token.uid.firstname,\n                lastname: token.uid.lastname,\n                id: token.uid.id\n            };\n            return session;\n        }\n    }\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (next_auth__WEBPACK_IMPORTED_MODULE_2___default()(authOptions));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9wYWdlcy9hcGkvYXV0aC9bLi4ubmV4dGF1dGhdLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBQTBDO0FBQ2E7QUFDdEI7QUFDaUM7QUFDM0QsTUFBTUksY0FBYztJQUN6QkMsU0FBUztRQUNQQyxVQUFVO1FBQ1ZDLFFBQVEsS0FBSyxLQUFLLEtBQUs7SUFDekI7SUFDQUMsUUFBUUMsa0VBQXVCO0lBQy9CRyxXQUFXO1FBQ1RULHNFQUFtQkEsQ0FBQztZQUNsQlUsTUFBTTtZQUNOLE1BQU1DLFdBQVVDLFdBQVcsRUFBRUMsR0FBRztnQkFDOUIsTUFBTSxFQUFFQyxJQUFJLEVBQUVDLFFBQVEsRUFBRSxHQUFHSDtnQkFDM0IsSUFBSSxDQUFDRSxRQUFRLENBQUNDLFVBQVUsT0FBTztnQkFFL0IsSUFBSTtvQkFDRixJQUFJQyxPQUFPLE1BQU1uQix1REFBY0EsQ0FBQ2lCO29CQUNoQyxJQUFJLENBQUNFLE1BQU0sT0FBTztvQkFDbEIsTUFBTUMsT0FBTyxNQUFNbkIsb0VBQWVBLENBQUNpQixVQUFVQyxLQUFLRCxRQUFRO29CQUMxRCxJQUFJLENBQUNFLE1BQU0sT0FBTztnQkFDcEIsRUFBRSxPQUFPQyxLQUFLO29CQUNaQyxRQUFRQyxHQUFHLENBQUNGO29CQUNaLE9BQU87Z0JBQ1Q7Z0JBQ0EsT0FBT0Y7WUFDVDtRQUNGO0tBQ0Q7SUFDREssV0FBVztRQUNUQyxLQUFLLE9BQU8sRUFBRUMsS0FBSyxFQUFFUCxJQUFJLEVBQUU7WUFDekIsSUFBSUEsTUFBTTtnQkFDUk8sTUFBTUMsR0FBRyxHQUFHUjtZQUNkO1lBRUEsT0FBT087UUFDVDtRQUNBckIsU0FBUyxPQUFPLEVBQUVBLE9BQU8sRUFBRXFCLEtBQUssRUFBRTtZQUNoQyx1RkFBdUY7WUFDdkYsMkRBQTJEO1lBQzNELHNEQUFzRDtZQUN0RCx1REFBdUQ7WUFDdkRyQixRQUFRdUIsUUFBUSxHQUFHO2dCQUNqQkMsTUFBTUgsTUFBTUMsR0FBRyxDQUFDRSxJQUFJO2dCQUNwQkMsT0FBT0osTUFBTUMsR0FBRyxDQUFDRyxLQUFLO2dCQUN0QlosVUFBVVEsTUFBTUMsR0FBRyxDQUFDVCxRQUFRO2dCQUM1QmEsV0FBV0wsTUFBTUMsR0FBRyxDQUFDSSxTQUFTO2dCQUM5QkMsVUFBVU4sTUFBTUMsR0FBRyxDQUFDSyxRQUFRO2dCQUM1QkMsSUFBSVAsTUFBTUMsR0FBRyxDQUFDTSxFQUFFO1lBQ2xCO1lBRUEsT0FBTzVCO1FBQ1Q7SUFDRjtBQUNGLEVBQUU7QUFDRixpRUFBZUgsZ0RBQVFBLENBQUNFLFlBQVlBLEVBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9jb2RlcGVuLy4vcGFnZXMvYXBpL2F1dGgvWy4uLm5leHRhdXRoXS5qcz81MjdmIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGdldFVzZXJCeUVtYWlsIH0gZnJvbSBcIkAvbGliL2RiXCI7XHJcbmltcG9ydCB7IGNvbXBhcmVQYXNzd29yZCB9IGZyb20gXCJAL2xpYi9wYXNzd29yZEhlbHBlclwiO1xyXG5pbXBvcnQgTmV4dEF1dGggZnJvbSBcIm5leHQtYXV0aFwiO1xyXG5pbXBvcnQgQ3JlZGVudGlhbHNQcm92aWRlciBmcm9tIFwibmV4dC1hdXRoL3Byb3ZpZGVycy9jcmVkZW50aWFsc1wiO1xyXG5leHBvcnQgY29uc3QgYXV0aE9wdGlvbnMgPSB7XHJcbiAgc2Vzc2lvbjoge1xyXG4gICAgc3RyYXRlZ3k6IFwiand0XCIsXHJcbiAgICBtYXhBZ2U6IDMwICogMjQgKiA2MCAqIDYwLCAvLyAzMCBkYXlzXHJcbiAgfSxcclxuICBzZWNyZXQ6IHByb2Nlc3MuZW52LkFVVEhfU0VDUkVULFxyXG4gIHByb3ZpZGVyczogW1xyXG4gICAgQ3JlZGVudGlhbHNQcm92aWRlcih7XHJcbiAgICAgIG5hbWU6IFwiQ3JlZGVudGlhbHNcIixcclxuICAgICAgYXN5bmMgYXV0aG9yaXplKGNyZWRlbnRpYWxzLCByZXEpIHtcclxuICAgICAgICBjb25zdCB7IG1haWwsIHBhc3N3b3JkIH0gPSBjcmVkZW50aWFscztcclxuICAgICAgICBpZiAoIW1haWwgfHwgIXBhc3N3b3JkKSByZXR1cm4gbnVsbDtcclxuXHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgIHZhciB1c2VyID0gYXdhaXQgZ2V0VXNlckJ5RW1haWwobWFpbCk7XHJcbiAgICAgICAgICBpZiAoIXVzZXIpIHJldHVybiBudWxsO1xyXG4gICAgICAgICAgY29uc3QgZmxhZyA9IGF3YWl0IGNvbXBhcmVQYXNzd29yZChwYXNzd29yZCwgdXNlci5wYXNzd29yZCk7XHJcbiAgICAgICAgICBpZiAoIWZsYWcpIHJldHVybiBudWxsO1xyXG4gICAgICAgIH0gY2F0Y2ggKGVycikge1xyXG4gICAgICAgICAgY29uc29sZS5sb2coZXJyKTtcclxuICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdXNlcjtcclxuICAgICAgfSxcclxuICAgIH0pLFxyXG4gIF0sXHJcbiAgY2FsbGJhY2tzOiB7XHJcbiAgICBqd3Q6IGFzeW5jICh7IHRva2VuLCB1c2VyIH0pID0+IHtcclxuICAgICAgaWYgKHVzZXIpIHtcclxuICAgICAgICB0b2tlbi51aWQgPSB1c2VyO1xyXG4gICAgICB9XHJcblxyXG4gICAgICByZXR1cm4gdG9rZW47XHJcbiAgICB9LFxyXG4gICAgc2Vzc2lvbjogYXN5bmMgKHsgc2Vzc2lvbiwgdG9rZW4gfSkgPT4ge1xyXG4gICAgICAvLyBoZXJlIHdlIHB1dCBzZXNzaW9uLnVzZURhdGEgYW5kIHB1dCBpbnNpZGUgaXQgd2hhdGV2ZXIgeW91IHdhbnQgdG8gYmUgaW4gdGhlIHNlc3Npb25cclxuICAgICAgLy8gaGVyZSB0cnkgdG8gY29uc29sZS5sb2codG9rZW4pIGFuZCBzZWUgd2hhdCBpdCB3aWxsIGhhdmVcclxuICAgICAgLy8gc29tZXRpbWVzIHRoZSB1c2VyIGdldCBzdG9yZWQgaW4gdG9rZW4udWlkLnVzZXJEYXRhXHJcbiAgICAgIC8vIHNvbWV0aW1lcyB0aGUgdXNlciBkYXRhIGdldCBzdG9yZWQgaW4ganVzdCB0b2tlbi51aWRcclxuICAgICAgc2Vzc2lvbi51c2VyRGF0YSA9IHtcclxuICAgICAgICByb2xlOiB0b2tlbi51aWQucm9sZSxcclxuICAgICAgICBlbWFpbDogdG9rZW4udWlkLmVtYWlsLFxyXG4gICAgICAgIHBhc3N3b3JkOiB0b2tlbi51aWQucGFzc3dvcmQsXHJcbiAgICAgICAgZmlyc3RuYW1lOiB0b2tlbi51aWQuZmlyc3RuYW1lLFxyXG4gICAgICAgIGxhc3RuYW1lOiB0b2tlbi51aWQubGFzdG5hbWUsXHJcbiAgICAgICAgaWQ6IHRva2VuLnVpZC5pZCxcclxuICAgICAgfTtcclxuXHJcbiAgICAgIHJldHVybiBzZXNzaW9uO1xyXG4gICAgfSxcclxuICB9LFxyXG59O1xyXG5leHBvcnQgZGVmYXVsdCBOZXh0QXV0aChhdXRoT3B0aW9ucyk7XHJcbiJdLCJuYW1lcyI6WyJnZXRVc2VyQnlFbWFpbCIsImNvbXBhcmVQYXNzd29yZCIsIk5leHRBdXRoIiwiQ3JlZGVudGlhbHNQcm92aWRlciIsImF1dGhPcHRpb25zIiwic2Vzc2lvbiIsInN0cmF0ZWd5IiwibWF4QWdlIiwic2VjcmV0IiwicHJvY2VzcyIsImVudiIsIkFVVEhfU0VDUkVUIiwicHJvdmlkZXJzIiwibmFtZSIsImF1dGhvcml6ZSIsImNyZWRlbnRpYWxzIiwicmVxIiwibWFpbCIsInBhc3N3b3JkIiwidXNlciIsImZsYWciLCJlcnIiLCJjb25zb2xlIiwibG9nIiwiY2FsbGJhY2tzIiwiand0IiwidG9rZW4iLCJ1aWQiLCJ1c2VyRGF0YSIsInJvbGUiLCJlbWFpbCIsImZpcnN0bmFtZSIsImxhc3RuYW1lIiwiaWQiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./pages/api/auth/[...nextauth].js\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fauth%2F%5B...nextauth%5D&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cauth%5C%5B...nextauth%5D.js&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();